

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="ja" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="ja" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>

  <title>ubuntuにdocker導入 &mdash; shkamemo 0.1 ドキュメント</title>
  


  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/my_theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
    <link rel="next" title="vscode関係" href="vscode.html" />
    <link rel="prev" title="sublime text 3 初期設定" href="sublime_text_3_初期設定.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> shkamemo
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="others/others.html">others</a></li>
<li class="toctree-l1"><a class="reference internal" href="raspberry_pi/raspberry_pi.html">raspberry_pi</a></li>
<li class="toctree-l1"><a class="reference internal" href="bashrcに加えた変更をまとめる記事.html">プロンプトの変更</a></li>
<li class="toctree-l1"><a class="reference internal" href="bashrcに加えた変更をまとめる記事.html#alias">alias</a></li>
<li class="toctree-l1"><a class="reference internal" href="python3.6.2のインストール.html">python3.6.2のインストール</a></li>
<li class="toctree-l1"><a class="reference internal" href="pythonスクリプトメモ.html">pythonスクリプトメモ</a></li>
<li class="toctree-l1"><a class="reference internal" href="sphinx_on_centos6.html">sphinx on centos6</a></li>
<li class="toctree-l1"><a class="reference internal" href="sphinx環境立ち上げ_win10.html">sphinx環境立ち上げ記録＠win10</a></li>
<li class="toctree-l1"><a class="reference internal" href="sublime_text_3_初期設定.html">sublime text 3 初期設定</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">ubuntuにdocker導入</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id1">インストール</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id2">ご挨拶する</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id3">ご機嫌伺いする</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id4">サヨナラする</a></li>
<li class="toctree-l2"><a class="reference internal" href="#python">pythonの開発環境を作る</a></li>
<li class="toctree-l2"><a class="reference internal" href="#centos6">centos6を導入</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id5">そのcentos6の中に</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="vscode.html">vscode関係</a></li>
<li class="toctree-l1"><a class="reference internal" href="win10初期設定したいこと.html">win10初期設定記録</a></li>
<li class="toctree-l1"><a class="reference internal" href="Windows10上でUbuntuを使いたい.html">Windows10上でUbuntuを使いたい</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">shkamemo</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>ubuntuにdocker導入</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/top/ubuntuにdocker導入.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="ubuntudocker">
<h1>ubuntuにdocker導入<a class="headerlink" href="#ubuntudocker" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p>dockerの説明って、超入門的なのがなくないか？と思ってとりあえず触ってみた記録。
いろいろやってみてわかったことは、dockerってのは試行錯誤してもすぐに振出しに戻れるってこと。</p>
<div class="section" id="id1">
<h2>インストール<a class="headerlink" href="#id1" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ol class="simple">
<li><p>sudo apt install docker</p></li>
<li><p>sudo apt install docker.io</p></li>
<li><p>docker -v</p></li>
</ol>
</div>
<div class="section" id="id2">
<h2>ご挨拶する<a class="headerlink" href="#id2" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ol>
<li><p>sudo docker run hello-world</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">Unable</span> <span class="n">to</span> <span class="n">find</span> <span class="n">image</span> <span class="s1">&#39;hello-world:latest&#39;</span> <span class="n">locally</span>
 <span class="n">latest</span><span class="p">:</span> <span class="n">Pulling</span> <span class="kn">from</span> <span class="nn">library</span><span class="o">/</span><span class="n">hello</span><span class="o">-</span><span class="n">world</span>
 <span class="mi">1</span><span class="n">b930d010525</span><span class="p">:</span> <span class="n">Pull</span> <span class="n">complete</span> 
 <span class="n">Digest</span><span class="p">:</span> <span class="n">sha256</span><span class="p">:</span><span class="n">d1668a9a1f5b42ed3f46b70b9cb7c88fd8bdc8a2d73509bb0041cf436018fbf5</span>
 <span class="n">Status</span><span class="p">:</span> <span class="n">Downloaded</span> <span class="n">newer</span> <span class="n">image</span> <span class="k">for</span> <span class="n">hello</span><span class="o">-</span><span class="n">world</span><span class="p">:</span><span class="n">latest</span>
</pre></div>
</div>
<p>→ hello-worldコンテナがなかったのでdocker hubから取得してきたよ</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> Hello from Docker!
 This message shows that your installation appears to be working correctly.

 To generate this message, Docker took the following steps:
  1. The Docker client contacted the Docker daemon.
  2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub.
     (amd64)
  3. The Docker daemon created a new container from that image which runs the
     executable that produces the output you are currently reading.
  4. The Docker daemon streamed that output to the Docker client, which sent it
     to your terminal.

 To try something more ambitious, you can run an Ubuntu container with:
  $ docker run -it ubuntu bash

 Share images, automate workflows, and more with a free Docker ID:
  https://hub.docker.com/

 For more examples and ideas, visit:
  https://docs.docker.com/get-started/
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="id3">
<h2>ご機嫌伺いする<a class="headerlink" href="#id3" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo docker ps -a
</pre></div>
</div>
</div>
<div class="section" id="id4">
<h2>サヨナラする<a class="headerlink" href="#id4" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul>
<li><p>コンテナの削除</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  $ sudo docker rm b1de95d065fa
</pre></div>
</div>
</li>
<li><p>イメージの削除</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  $ sudo docker rmi hello-world
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="python">
<h2>pythonの開発環境を作る<a class="headerlink" href="#python" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul>
<li><p>イメージを取得</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">sudo</span> <span class="n">docker</span> <span class="n">pull</span> <span class="n">python</span>
</pre></div>
</div>
</li>
<li><p>コンテナを起動</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  sudo docker run -it -w /app -v $(pwd):/app python bash
</pre></div>
</div>
<p>これで python -V すると最新版が見えるはず。
コンテナ起動前とバージョンが違っているっはず。</p>
</li>
<li><p>aptでsphinxを導入する</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">apt</span> <span class="n">install</span> <span class="n">python3</span><span class="o">-</span><span class="n">sphinx</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="centos6">
<h2>centos6を導入<a class="headerlink" href="#centos6" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ol>
<li><p>imageとってくる</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">sudo</span> <span class="n">docker</span> <span class="n">pull</span> <span class="n">centos</span><span class="p">:</span><span class="n">centos6</span>
</pre></div>
</div>
</li>
<li><p>imageの確認</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">sudo</span> <span class="n">docker</span> <span class="n">images</span>
</pre></div>
</div>
</li>
<li><p>imageの詳細</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">sudo</span> <span class="n">docker</span> <span class="n">inspect</span> <span class="n">centos</span><span class="p">:</span><span class="n">centos6</span>
</pre></div>
</div>
</li>
<li><p>containerの起動</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">centos6上でこんにちは</span>
 <span class="n">sudo</span> <span class="n">docker</span> <span class="n">run</span> <span class="n">centos</span><span class="p">:</span><span class="n">centos6</span> <span class="n">echo</span> <span class="s2">&quot;hello world&quot;</span>

 <span class="n">動いたかの確認</span>
 <span class="n">sudo</span> <span class="n">docker</span> <span class="n">ps</span> <span class="o">-</span><span class="n">a</span>
 <span class="n">Exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="n">は正常終了</span>

 <span class="n">containerの中で作業する</span>

 <span class="n">sudo</span> <span class="n">docker</span> <span class="n">run</span> <span class="o">-</span><span class="n">it</span> <span class="n">centos</span>
</pre></div>
</div>
</li>
<li><p>containerの削除</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">sudo</span> <span class="n">docker</span> <span class="n">rm</span> <span class="o">&lt;</span><span class="n">container</span><span class="o">&gt;</span>
</pre></div>
</div>
</li>
<li><p>containerで作業する</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> sudo docker run -it centos bash
 とか
 sudo docker run -it -w /app -v $(pwd):/app python bash
 とか

 抜けるには
 exit
 再開するには
 sudo docker start &lt;CONTAINER ID&gt;
 sudo docker attach &lt;CONTAINER ID&gt;
</pre></div>
</div>
</li>
<li><p>何かしらいじったcontainerをimageにする</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">sudo</span> <span class="n">docker</span> <span class="n">commit</span> <span class="o">&lt;</span><span class="n">container</span> <span class="n">ID</span><span class="o">&gt;</span> <span class="n">username</span><span class="o">/</span><span class="n">hogehoge</span>
</pre></div>
</div>
</li>
<li><p>dockerのimageをファイルにして持ち歩く save/load</p></li>
</ol>
<p>githubにあげてもいいかもしんない。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">sudo</span> <span class="n">docker</span> <span class="n">save</span> <span class="o">&lt;</span><span class="n">image</span> <span class="n">name</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">o</span> <span class="o">&lt;</span><span class="n">filename</span><span class="o">&gt;</span>
    <span class="n">tarballができる</span>

    <span class="n">sudo</span> <span class="n">docker</span> <span class="n">load</span> <span class="o">-</span><span class="n">i</span> <span class="o">&lt;</span><span class="n">filename</span><span class="o">&gt;</span>
</pre></div>
</div>
<div class="section" id="id5">
<h3>そのcentos6の中に<a class="headerlink" href="#id5" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p>pythonを導入する</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">yum</span> <span class="n">install</span> <span class="n">xz</span>
  <span class="n">tar</span> <span class="n">xvf</span> <span class="n">Python</span><span class="o">-</span><span class="mf">3.8</span><span class="o">.</span><span class="mf">1.</span><span class="n">tar</span><span class="o">.</span><span class="n">xz</span>
</pre></div>
</div>
</li>
<li><p>docker環境を導入する</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  yum install epel-release

  tee /etc/yum.repos.d/docker.repo &lt;&lt;- &#39;EOF&#39;
  [dockerrepo]
  name=Docker Repository
  baseurl=https://yum.dockerproject.org/repo/main/centos/$releasever/
  enabled=1
  gpgcheck=1
  gpgkey=https://yum.dockerproject.org/gpg
  EOF

  yum install docker-engine

  service docker start

  sh -c &quot;curl -L https://github.com/docker/compose/releases/download/1.5.2/docker-compose-`uname -s`-`uname -m` &gt; /usr/local/bin/docker-compose&quot;
</pre></div>
</div>
</li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="vscode.html" class="btn btn-neutral float-right" title="vscode関係" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="sublime_text_3_初期設定.html" class="btn btn-neutral float-left" title="sublime text 3 初期設定" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, shka

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>